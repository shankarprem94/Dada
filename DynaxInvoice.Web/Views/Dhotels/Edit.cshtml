@model DynaxInvoice.BO.DynaxHotel
@{
    ViewBag.Title = "Dynax Solutions Pvt. Ltd.";
    Layout = "~/Views/Shared/_LayoutPage.cshtml";
}

<div class="homecontainer">
    <h3>Welcome to Booking Master</h3>
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        @{
            if (ViewBag.Status != null)
            {
                if (ViewBag.Status > 0)
                {
                    <div class="alert alert-success">
                        Hotel updated successfully.
                    </div>
                }
                else if (ViewBag.Status == 0)
                {
                    <div class="alert alert-danger">
                        Something went wrong !! Please try after sometime.
                    </div>
                }
            }
        }
    </div>
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        @{
            if (ViewBag.Status != null)
            {
                if (ViewBag.Status > 0)
                {
                    <div class="alert alert-success">
                        Hotel added successfully.
                    </div>
                }
                else if (ViewBag.Status == 0)
                {
                    <div class="alert alert-danger">
                        Something went wrong !! Please try after sometime.
                    </div>
                }
            }
        }
    </div>
    <div class="login2 bg-light">
        <center>
            <h3><i class="fas fa-globe"></i> Add Hotel</h3>
        </center>
        <hr />
        @using (Html.BeginForm("Edit", "Dhotels", FormMethod.Post))
        {
            @Html.AntiForgeryToken()
            @Html.HiddenFor(m => m.FacilityId)

            <div class="row">
                <div class="col-md-9">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group">
                                <label for="CompanyName" class="font-weight-bold">Customer</label>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <div class="input-group-text"><i class="fas fa-globe"></i></div>
                                    </div>
                                    @Html.DropDownListFor(m => m.CustomerId, new SelectList(ViewBag.cstList, "Id", "CompanyName", "0"),
                                    "Select customer", new { @class = "form-control", required = "required" })
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="CompanyName" class="font-weight-bold">Hotel Name</label>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <div class="input-group-text"><i class="far fa-building"></i></div>
                                    </div>
                                    @Html.TextBoxFor(m => m.HotelName, new { @class = "form-control", placeholder = "Hotel Name", required = "required" })
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="HotelType" class="font-weight-bold">Hotel Type</label>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <div class="input-group-text"><i class="far fa-star"></i></div>
                                    </div>
                                    @Html.DropDownListFor(m => m.HotelType, new List<SelectListItem>
                                       {
                                                 new SelectListItem{ Text="Hotel Type", Value = "" },
                                                 new SelectListItem{ Text="No Star", Value = "No Star" },
                                                 new SelectListItem{ Text="3 Star", Value = "3 Star" },
                                                 new SelectListItem{ Text="5 Star", Value = "5 Star" },
                                                 new SelectListItem{ Text="7 Star", Value = "7 Star" }
                                            },
                                            new { @class = "form-control", placeholder = "Hotel Type", required = "required" })
                                </div>
                            </div>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="Address1" class="font-weight-bold">Address1</label>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <div class="input-group-text"><i class="fas fa-address-card"></i></div>
                                    </div>
                                    @Html.TextBoxFor(m => m.Address1, new { @class = "form-control", placeholder = "Address1", required = "required" })
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="Address1" class="font-weight-bold">Address2</label>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <div class="input-group-text"><i class="fas fa-address-card"></i></div>
                                    </div>
                                    @Html.TextBoxFor(m => m.Address2, new { @class = "form-control", placeholder = "Address2", required = "required" })
                                </div>
                            </div>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="City" class="font-weight-bold">City</label>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <div class="input-group-text"><i class="fas fa-address-card"></i></div>
                                    </div>
                                    @Html.TextBoxFor(m => m.City, new { @class = "form-control", placeholder = "City", required = "required" })
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="ZoneId" class="font-weight-bold">State</label>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <div class="input-group-text"><i class="fas fa-globe"></i></div>
                                    </div>
                                    @Html.DropDownListFor(m => m.StateId, new SelectList(ViewBag.stList, "Id", "StateName", "0"),
                                    "Select State", new { @class = "form-control", required = "required" })
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="Pincode" class="font-weight-bold">Pincode</label>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <div class="input-group-text"><i class="fas fa-address-card"></i></div>
                                    </div>
                                    @Html.TextBoxFor(m => m.Pincode, new { @class = "form-control", placeholder = "Pincode", required = "required", maxlength = "6", minlength = "6" })
                                </div>
                            </div>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="Email" class="font-weight-bold">Mobile</label>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <div class="input-group-text"><i class="fas fa-envelope-square"></i></div>
                                    </div>
                                    @Html.TextBoxFor(m => m.MobileNo, new { @class = "form-control", placeholder = "Mobile", required = "required" })
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="Email" class="font-weight-bold">Email</label>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <div class="input-group-text"><i class="fas fa-envelope-square"></i></div>
                                    </div>
                                    @Html.TextBoxFor(m => m.Email, new { @class = "form-control", placeholder = "Email", required = "required" })
                                </div>
                            </div>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="Landmark" class="font-weight-bold">Landmark</label>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <div class="input-group-text"><i class="fas fa-map-marker-alt"></i></div>
                                    </div>
                                    @Html.TextBoxFor(m => m.Landmark, new { @class = "form-control", placeholder = "Landmark" })
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="DistFromLandmark" class="font-weight-bold">Dist. from Landmark</label>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <div class="input-group-text"><i class="far fa-arrow-alt-circle-right"></i></div>
                                    </div>
                                    @Html.TextBoxFor(m => m.DistFromLandmark, new { @class = "form-control", placeholder = "Distance From Landmark" })
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="RatePerNight" class="font-weight-bold">Rate Per Night</label>
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <div class="input-group-text"><i class="fas fa-rupee-sign"></i></div>
                                    </div>
                                    @Html.TextBoxFor(m => m.RatePerNight, new { @class = "form-control", placeholder = "Rate Per Night", required = "required" })
                                </div>
                            </div>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group">
                                <button class="btn btn-info m-b-20 btn-block text-uppercase waves-effect waves-light" type="submit">
                                    <i class="fas fa-plus-square"></i> SAVE Hotel
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <label class="font-weight-bold">Facilities</label>
                    <div class="row">
                        <div class="alert alert-success">
                            <ul style="list-style:none; margin:0;padding:0;">
                                @{
                                    if (ViewBag.lstFac != null)
                                    {
                                        string facl = ViewBag.facl;
                                        string[] arrFac = new string[] { };
                                        int len = 0;
                                        if (!string.IsNullOrWhiteSpace(facl))
                                        {
                                            arrFac = facl.Split(',');
                                            len = arrFac.Length;
                                        }
                                        foreach (var facility in ViewBag.lstFac)
                                        {
                                            var txt = "chk" + facility.Id;
                                            bool flag = false;
                                            for (int i = 0; i < len; i++)
                                            {
                                                int flg;
                                                bool success = Int32.TryParse(arrFac[i], out flg);
                                                if (flg == facility.Id)
                                                {
                                                    flag = true;
                                                }
                                            }
                                            if (flag == true)
                                            {
                                                <li>
                                                    <input type="checkbox" class="custom-checkbox" id="@facility.Id" value="@facility.Id" checked="checked" />
                                                    <label for="Status">@facility.Facility</label>
                                                </li>

                                            }
                                            else
                                            {
                                                <li>
                                                    <input type="checkbox" class="custom-checkbox" id="@facility.Id" value="@facility.Id" />
                                                    <label for="Status">@facility.Facility</label>
                                                </li>

                                            }
                                        }
                                    }
                                }
                            </ul>                           
                        </div>
                        <div class="clearfix"></div>
                    </div>
                </div>
            </div>

        }
    </div>
</div>
<script>
    $(document).ready(function () {

        $(".custom-checkbox").bind("change", function () {
            var chkVal = $(this).val();
            if ($(this).is(':checked')) {
                AddZoneId(chkVal);
            } else {
                RemoveZoneId(chkVal);
            }
        });

    });

    function RemoveZoneId(txt) {
        var fid = $("#FacilityId").val();
        var facility = fid.split(',');
        if (facility.length > 0) {
            for (i = 0; i < facility.length; i++) {
                if (facility[i] === txt) {
                    facility.splice(i, 1);
                }
            }
        }
        $("#FacilityId").val(facility.join(','));
    }

    function AddZoneId(txt) {
        var fid = $("#FacilityId").val();
        if (fid !== "") {
            var facility = fid.split(',');
            if (facility.length > 0) {
                var flag = 0;
                for (i = 0; i < facility.length; i++) {
                    if (facility[i] === txt) {
                        flag = 1;
                    }
                }
                if (flag == 0) {
                    fid = fid + ',' + txt;
                }
                $("#FacilityId").val(fid);
            }
        } else {
            $("#FacilityId").val(txt);
        }
    }

</script>
@model DynaxInvoice.BO.DynaxDealer
@{
    ViewBag.Title = "Dynax Solutions Pvt. Ltd.";
    Layout = "~/Views/Shared/_LayoutPage.cshtml";
}

<div class="homecontainer">
    <h3>Welcome to Booking Master</h3>
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        @{
            if (ViewBag.Status != null)
            {
                if (ViewBag.Status > 0)
                {
                    <div class="alert alert-success">
                        Dealer added successfully.
                    </div>
                    <script type="text/javascript">
                        $('input,select').attr('disabled', 'disabled');
                    </script>
                }
                else if (ViewBag.Status == 0)
                {
                    <div class="alert alert-danger">
                        Something went wrong !! Please try after sometime.
                    </div>
                }
            }
        }
    </div>
    <div class="login2 bg-light">
        <center>
            <h3><i class="fas fa-globe"></i> Add Dealer</h3>
        </center>
        <hr />
        @using (Html.BeginForm("Create", "DDealer", FormMethod.Post))
        {
            @Html.AntiForgeryToken()
            @Html.HiddenFor(m => m.ZoneId);
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        <label for="CompanyName" class="font-weight-bold">Dealer Name</label>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <div class="input-group-text"><i class="far fa-building"></i></div>
                            </div>
                            @Html.TextBoxFor(m => m.DealerName, new { @class = "form-control", placeholder = "Dealer Name", required = "required" })
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="Address1" class="font-weight-bold">Address1</label>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <div class="input-group-text"><i class="fas fa-address-card"></i></div>
                            </div>
                            @Html.TextBoxFor(m => m.DealerAddress1, new { @class = "form-control", placeholder = "Address1", required = "required" })
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="Address1" class="font-weight-bold">Address2</label>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <div class="input-group-text"><i class="fas fa-address-card"></i></div>
                            </div>
                            @Html.TextBoxFor(m => m.DealerAddress2, new { @class = "form-control", placeholder = "Address2", required = "required" })
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="City" class="font-weight-bold">City</label>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <div class="input-group-text"><i class="fas fa-address-card"></i></div>
                            </div>
                            @Html.TextBoxFor(m => m.City, new { @class = "form-control", placeholder = "City", required = "required" })
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="ZoneId" class="font-weight-bold">State</label>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <div class="input-group-text"><i class="fas fa-globe"></i></div>
                            </div>
                            @Html.DropDownListFor(m => m.StateId, new SelectList(ViewBag.stList, "Id", "StateName", "0"),
                            "Select State", new { @class = "form-control", required = "required" })
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="Pincode" class="font-weight-bold">Pincode</label>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <div class="input-group-text"><i class="fas fa-address-card"></i></div>
                            </div>
                            @Html.TextBoxFor(m => m.Pincode, new { @class = "form-control", placeholder = "Pincode", required = "required", maxlength = "6", minlength = "6" })
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <label class="font-weight-bold">Zone</label>
                    <div class="alert alert-info">
                        <div class="row">
                            @{
                                var zoneList = ViewBag.zoneList;
                                if (zoneList != null)
                                {
                                    foreach (var zone in zoneList)
                                    {
                                        <div class="col-md-3">
                                            <input type="checkbox" id="@zone.Id" class="custom-checkbox" value="@zone.Id" />
                                            <label for="Status">@zone.ZoneName</label>
                                        </div>
                                    }
                                }
                            }
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="ContactPerson" class="font-weight-bold">Contact Person</label>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <div class="input-group-text"><i class="far fa-user"></i></div>
                            </div>
                            @Html.TextBoxFor(m => m.ContactPerson, new { @class = "form-control", placeholder = "Contact Person", required = "required" })
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="ContactMobileNo" class="font-weight-bold">Contact Person's Mobile</label>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <div class="input-group-text"><i class="fas fa-mobile-alt"></i></div>
                            </div>
                            @Html.TextBoxFor(m => m.MobileNo, new { @class = "form-control", placeholder = "Contact Mobile No.", required = "required", maxlength = "10", minlength = "10" })
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="Email" class="font-weight-bold">Email</label>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <div class="input-group-text"><i class="fas fa-envelope-square"></i></div>
                            </div>
                            @Html.TextBoxFor(m => m.EmailId, new { @class = "form-control", placeholder = "Email", required = "required" })
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="Email" class="font-weight-bold">GSTIN</label>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <div class="input-group-text"><i class="fas fa-envelope-square"></i></div>
                            </div>
                            @Html.TextBoxFor(m => m.GSTNo, new { @class = "form-control", placeholder = "GST Number", required = "required" })
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <h4 class="text-center">Bank Details</h4>
                    <hr />
                </div>
            </div>
            <div class="row">
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="Email" class="font-weight-bold">Account Name</label>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <div class="input-group-text"><i class="fas fa-envelope-square"></i></div>
                            </div>
                            @Html.TextBoxFor(m => m.AccountName, new { @class = "form-control", placeholder = "Account Name", required = "required" })
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="Email" class="font-weight-bold">Account No</label>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <div class="input-group-text"><i class="fas fa-envelope-square"></i></div>
                            </div>
                            @Html.TextBoxFor(m => m.AccountNo, new { @class = "form-control", placeholder = "Account No", required = "required" })
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="BankName" class="font-weight-bold">Bank Name</label>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <div class="input-group-text"><i class="fas fa-money-check-alt"></i></div>
                            </div>
                            @Html.TextBoxFor(m => m.BankName, new { @class = "form-control", placeholder = "Bank Name", required = "required" })
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="BankName" class="font-weight-bold">IFSC Code</label>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <div class="input-group-text"><i class="fas fa-money-check-alt"></i></div>
                            </div>
                            @Html.TextBoxFor(m => m.IFSCCode, new { @class = "form-control", placeholder = "IFSC Code", required = "required" })
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        <div class="col-xs-12 text-center">
                            @Html.CheckBox("Status", true, new { @class = "with-font" })
                            <label for="Status">Active</label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        <button class="btn btn-info m-b-20 btn-block text-uppercase waves-effect waves-light" type="submit">
                            <i class="fas fa-plus-square"></i> SAVE DEALER INFO
                        </button>
                    </div>
                </div>
            </div>
        }
    </div>
</div>
<script>
    $(document).ready(function () {

        $(".custom-checkbox").bind("change", function () {
            var chkVal = $(this).val();
            if ($(this).is(':checked')) {
                AddZoneId(chkVal);
            } else {
                RemoveZoneId(chkVal);
            }
        });

    });

    function RemoveZoneId(txt) {
        var id = $("#ZoneId").val();
        var zone = id.split(',');
        if (zone.length > 0) {
            for (i = 0; i < zone.length; i++) {
                if (zone[i] === txt) {
                    zone.splice(i, 1);
                }
            }
        }
        $("#ZoneId").val(zone.join(','));
    }

    function AddZoneId(txt) {
        //  debugger;
        var zid = $("#ZoneId").val();
        if (zid !== "") {
            //var n = fid.indexOf(',');
            // if (n != -1) {
            var zone = zid.split(',');
            if (zone.length > 0) {
                var flag = 0;
                for (i = 0; i < zone.length; i++) {
                    if (zone[i] === txt) {
                        flag = 1;
                    }
                }
                if (flag == 0) {
                    zid = zid + ',' + txt;
                }
                $("#ZoneId").val(zid);
            }
            // }
            ////else {
            ////    zid = zid + ',' + txt;
            ////    $("#ZoneId").val(zid);
            ////}
        } else {
            $("#ZoneId").val(txt);
        }
    }

</script>
